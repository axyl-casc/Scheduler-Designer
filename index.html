<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Website with Tailwind and Godot</title>

  <!-- Tailwind CSS -->
  <link href="./styles/tailwind.min.css" rel="stylesheet">

  <!-- for styling the CPU graph diagram -->
  <link href="./styles/stylesheet.css" rel="stylesheet">

  <!-- Favicon (optional) 
    <link rel="icon" href="./assets/favicon.ico" type="image/x-icon" />
    -->
    <script src="./js/plotly-2.35.2.min.js"></script>
    <script src="./js/results.js"></script>
    <script src="./js/utils.js"></script>
    <script src="./js/process.js"></script>
    <script src="./js/simulation.js"></script>
    <script src="./js/main.js"></script>
    <script src="./js/listeners.js"></script>
</head>

<body>
  <header class="w-full p-5 bg-gray-800 shadow-lg text-center">
    <h1 class="text-4xl font-bold text-white">CPU Scheduler Simulator</h1>
    <p class="text-lg mt-2 text-gray-400">Insert more here... Press simulation to run</p>
  </header>
  <!-- Toast Container -->
  <div id="toast-container" class="fixed top-20 right-5 hidden z-60">
    <div id="toast"
      class="bg-green-600 text-white px-4 py-2 rounded shadow-md opacity-0 transition-opacity duration-500">
    </div>
  </div>
  <!-- Dialog -->
  <dialog id="aboutDialog" class="bg-white rounded-lg shadow-lg w-96 p-0">

    <!-- Modal Header -->
    <div class="px-4 py-2 bg-blue-600 text-white flex justify-between items-center rounded-t-lg">
      <h2 class="text-lg font-semibold">About Us</h2>
      <button id="closeDialog" class="text-white hover:text-gray-300"
        onclick="document.querySelector('#aboutDialog').close()">&times;</button>
    </div>

    <!-- Modal Content -->
    <div class="p-4">
      <p class="text-gray-700">
        This is the final project by Axyl and Kevin for COMP 3659. We hope you enjoy exploring what we've built and
        appreciate the effort that went into this work.
      </p>
    </div>

    <!-- Modal Footer -->
    <div class="px-4 py-2 bg-gray-100 flex justify-end rounded-b-lg">
      <button id="closeDialogFooter" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700"
        onclick="document.querySelector('#aboutDialog').close()">
        Close
      </button>
    </div>
  </dialog>

  <main id="mainScreen">
    <div class="flex h-screen">
      <!-- Left Container: Scrollable Process List -->
      <div class="w-1/4 h-full bg-gray-300 border-r overflow-y-auto">
        <div class="rounded-lg shadow-md bg-blue-300 p-4 m-4">
          <h2 class="text-xl font-bold p-4 border-b">Process List</h2>
          <ul id="processList" class="p-4 space-y-2">
            <!-- Add list items here -->
          </ul>
          <button id="editProcessBtn"
            class="ml-4 bg-green-500 text-white px-6 py-3 rounded shadow hover:bg-green-600 transition">
            Edit Processes
          </button>
          <br><br><hr><br>
          <label for="scheduler" class="block text-sm font-medium text-gray-700 mb-2">Choose a Scheduler:</label>
          <select id="scheduler"
            class="w-full px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            <option selected disabled>Select a scheduler</option>
            <option value="fifo">FIFO</option>
            <option value="sjf">SJF</option>
            <option value="ljf">LJF</option>
            <option value="priority">Priority</option>
          </select>
        </div>

      </div>


      <!-- Right Container: Buttons for Results/Simulation -->
      <div id="windowScreen" class="w-3/4 bg-gray-500 flex flex-col items-center">
        <div id="simulatorScreen" class="w-full h-5/6 flex flex-row justify-center items-start gap-4">
          <!-- Diagram Section -->
          <div class="w-5/6 h-4/6 rounded-lg shadow-md bg-gray-100 p-4">
            <svg width="600" height="450">
              <!-- Arrowhead marker -->
              <defs>
                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                  <polygon points="0 0, 10 3.5, 0 7" fill="black"></polygon>
                </marker>
              </defs>
        
              <!-- States -->
              <!-- New -->
              <circle cx="100" cy="50" r="40" class="state"></circle>
              <text x="100" y="50" class="state-label">New</text>
              <text x="100" y="70" class="state-label" id="new_state_process"></text>
        
              <!-- Terminated -->
              <circle cx="500" cy="50" r="40" class="state"></circle>
              <text x="500" y="50" class="state-label">Terminated</text>
              <text x="500" y="70" class="state-label" id="terminated_state_process"></text>
        
              <!-- Ready -->
              <circle cx="200" cy="200" r="40" class="state"></circle>
              <text x="200" y="200" class="state-label">Ready</text>
              <text x="200" y="220" class="state-label" id="ready_state_process"></text>
        
              <!-- Running -->
              <circle cx="400" cy="200" r="40" class="state"></circle>
              <text x="400" y="200" class="state-label">Running</text>
              <text x="400" y="220" class="state-label" id="running_state_process"></text>
        
              <!-- Waiting -->
              <circle cx="300" cy="350" r="40" class="state"></circle>
              <text x="300" y="350" class="state-label">Waiting</text>
              <text x="300" y="370" class="state-label" id="wait_state_process"></text>
        
              <!-- Transitions -->
              <!-- New to Ready -->
              <line x1="140" y1="50" x2="160" y2="160" class="arrow"></line>
        
              <!-- Ready to Running -->
              <line x1="240" y1="200" x2="360" y2="200" class="arrow"></line>
        
              <!-- Running to Waiting -->
              <line x1="380" y1="240" x2="320" y2="310" class="arrow"></line>
        
              <!-- Running to Terminated -->
              <line x1="440" y1="200" x2="460" y2="90" class="arrow"></line>
        
              <!-- Waiting to Ready -->
              <line x1="280" y1="310" x2="220" y2="240" class="arrow"></line>
        
              <!-- Running to Ready -->
              <line x1="360" y1="200" x2="240" y2="200" class="arrow"></line>
            </svg>
            <div id ="speedSlider" class="flex flex-col items-center mt-8">
              <label for="slider" class="mb-2 text-gray-700 font-medium">Adjust Speed</label>
              <input 
                id="slider" 
                type="range" 
                min="0" 
                max="1" 
                step="0.01" 
                value="0.5" 
                class="w-64 accent-blue-500"
              />
              <div class="mt-4">
                <span class="text-gray-700">Current Value:</span> 
                <span id="slider-value" class="font-bold text-blue-500">0.5</span>
              </div>
            </div>
            
          </div>
        
          <!-- Notifications Section -->
          <div id="notification-box" class="w-1/3 bg-gray-800 text-white p-4 rounded-md shadow-md h-4/6 overflow-y-auto">
            <!-- Notifications will be appended here -->
          </div>
        </div>
        

        <div id="resultScreen" class="hidden w-full h-5/6 flex flex-col justify-center items-center">
          <div class="w-5/6 h-5/6 rounded-lg shadow-md bg-gray-100 p-4">
            Results
          </div>
        </div>

        <div class="flex flex-row items-center m-0">
          <button id="showSimBtn"
            class="mr-2 bg-green-500 text-white px-6 py-3 rounded shadow hover:bg-green-600 transition">
            Simulation
          </button>

          <button id="showResultBtn"
            class="ml-2 bg-blue-500 text-white px-6 py-3 rounded shadow hover:bg-blue-600 transition">
            Results
          </button>


        </div>
      </div>
    </div>
  </main>



  <aside id="pcbScreen" class="hidden flex h-screen">
    <!-- Left Container: Scrollable Process List -->
    <div class="w-1/4 h-full bg-gray-300 border-r overflow-y-auto">
      <div class="rounded-lg shadow-md bg-blue-300 p-4 m-4">
        <h2 class="text-xl font-bold p-4 border-b">Process List</h2>
        <ul id="editProcessList" class="p-4 space-y-2">
          <!-- Add list items here -->
        </ul>
        <button id="returnMainBtn"
          class="ml-4 bg-green-500 text-white px-6 py-3 rounded shadow hover:bg-green-600 transition">
          Back to Simulator
        </button>

        <button id="clearProcessBtn" type="button"
              class="ml-6 bg-blue-500 text-white px-6 py-2 rounded-lg shadow hover:bg-blue-600 transition">
              Clear
        </button>
      </div>
    </div>


    </div>


    <!-- Right Container: PCB Editing Form -->
    <div class="w-3/4 h-full bg-gray-500 flex items-center justify-center">
      <div class="w-full max-w-2xl bg-white rounded-lg shadow-lg p-8">
        <h2 class="text-2xl font-bold mb-6 text-gray-700">Create a New Process</h2>
        <form class="space-y-6">
          <!-- Process Name? -->
          <div>
            <label for="processName" class="block text-sm font-medium text-gray-600">Process Name</label>
            <input type="text" id="processName" placeholder="Enter Process Name"
              class="w-full mt-2 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none" />
          </div>

          <!-- Priority Input? -->
          <div class="grid grid-cols-2 gap-6">
            <div>
              <label for="priorityInput" class="block text-sm font-medium text-gray-600">Priority (the lower the number the higher the priority)</label>
              <input type="number" id="priorityInput" placeholder="0"
                class="w-full mt-2 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none" />
            </div>
            <!-- Running Chance? -->
            <div>
              <label for="runningChanceInput" class="block text-sm font-medium text-gray-600">Running Chance (0-100%)</label>
              <input type="number" id="runningChanceInput" placeholder="E.g. 50 = 50%"
                class="w-full mt-2 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none" />
            </div>
          </div>

          <!-- Is I/O? -->
          <div>
            <label for="isIOInput" class="block text-sm font-medium text-gray-600">Is I/O?</label>
            <select id="isIOInput"
              class="w-full mt-2 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none">
              <option value="" disabled selected>Select True or False</option>
              <option value="true">True</option>
              <option value="false">False</option>
            </select>
          </div>

          <!-- Burst Time? -->
          <div>
            <label for="burstTimeInput" class="block text-sm font-medium text-gray-600">Burst Time</label>
            <input type="number" id="burstTimeInput" placeholder="Enter Burst Length (Should be > 0)"
              class="w-full mt-2 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none" />
          </div>

          <!-- Time to arrival? -->
          <div>
            <label for="arrivalTimeInput" class="block text-sm font-medium text-gray-600">Time to arrival</label>
            <input type="number" id="arrivalTimeInput" placeholder="Enter time to arrival (Should be >= 0)"
              class="w-full mt-2 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none" />
          </div>

          <!-- Notes Could add a process description here, would have to add to the process data structure--> 
          <div>
            <label for="notes" class="block text-sm font-medium text-gray-600">Additional Notes</label>
            <textarea id="notes" placeholder="Enter any additional notes..." rows="4"
              class="w-full mt-2 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none"></textarea>
          </div>

          <!-- Submit Button -->
          <div class="flex justify-end">
            <button id="createProcessBtn" type="button"
              class="bg-blue-500 text-white px-6 py-2 rounded-lg shadow hover:bg-blue-600 transition">
              Create
            </button>
          </div>
        </form>
      </div>
    </div>
  </aside>







  </aside>



  <footer class="w-full p-5 bg-gray-800 text-center">
    <p class="text-gray-500"><a href="#" onclick="document.querySelector('#aboutDialog').showModal()"
        class="text-blue-600 hover:underline">About</a>
      <hr>Axyl and Kevin - COMP3659 Fall 2024. All rights reserved.
    </p>
    <p class="text-gray-500">Powered by <a href="https://tailwindcss.com/" class="text-blue-400 underline">Tailwind
        CSS</a>
  </footer>

</body>

</html>
